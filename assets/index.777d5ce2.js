(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerpolicy&&(d.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?d.credentials="include":o.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(o){if(o.ep)return;o.ep=!0;const d=n(o);fetch(o.href,d)}})();let u;const S=new Uint8Array(16);function L(){if(!u&&(u=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!u))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(S)}const a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));function D(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}const w=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),k={randomUUID:w};function x(e,t,n){if(k.randomUUID&&!t&&!e)return k.randomUUID();e=e||{};const r=e.random||(e.rng||L)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let o=0;o<16;++o)t[n+o]=r[o];return t}return D(r)}const h="task.todoDatabase",c=JSON.parse(localStorage.getItem(h))||[],g=new Date;let N=g.getFullYear(),T=g.getMonth()+1,p=g.getDate();const C=document.getElementById("date-stamp"),m=document.querySelector("#all-tasks"),E=document.querySelector("#task-form"),l=document.querySelector("#new-task-input"),A=document.querySelector("#date-dropdown"),v=document.querySelector("#category"),q=document.querySelector("#school"),I=document.querySelector("#engineering"),O=document.querySelector("#info");let s="";C.innerHTML=N+"-"+T+"-"+String(p).padStart(2,"0");q.addEventListener("click",b);I.addEventListener("click",b);O.addEventListener("click",b);E?.addEventListener("submit",e=>{if(e.preventDefault(),/^\s*$/.test(l.value)){alert("Don't forget to specify your task");return}const n={id:x(),inputContent:l.value,createdAt:g,deadline:A.value,completed:!1,category:s};$(n),l.value="",s=""});function U(){document.querySelectorAll(".trash-btn").forEach(e=>{e.addEventListener("click",B)}),document.querySelectorAll(".hidden-checkbox").forEach(e=>{e.addEventListener("click",R)})}function i(){M(v.value),m&&(m.innerHTML="");for(var e=0;e<c.length;e++){const t=c[e].completed?"checked":"";m&&(m.innerHTML+=`
            <div id="${c[e].id}" class="task p-1 text-slate-800 flex">
              <input type="checkbox" ${t} id="task-${c[e].id}" class="hidden-checkbox absolute opacity-0">
              <label title="Deadline at ${c[e].deadline}" for="task-${c[e].id}" class="gap-2 flex-grow bg-slate-200/20 p-1 flex items-center font-semibold">
                <span><span id="checkbox-${c[e].id}" class="custom-checkbox flex"></span></span>
                <p>${c[e].inputContent}</p><span class="material-symbols-outlined">${c[e].category}</span>
              </label>
              <button id="remove-${c[e].id}" class="trash-btn p-1 bg-slate-200/20 z-10">
                <span class="material-symbols-outlined pt-2">
                  delete
                </span>
              </button>
            </div>
        `);const n=new Date(c[e].deadline),r=document.querySelector(`[id="${c[e].id}"]`);n.getDate()-p<=5&&n.getDate()-p>=-1&&r.classList.add("border-2","border-sky-500"),n.getDate()-p<0&&r.classList.add("border-2","border-red-700"),c[e].completed&&r.classList.remove("border-2")}U()}function y(){localStorage.setItem(h,JSON.stringify(c))}function $(e){c.find(n=>n.inputContent===l.value)?.inputContent===l.value?alert("Task is already on your list, work smarter not harder!"):(c.push(e),c.sort((n,r)=>Number(n.completed)-Number(r.completed)),y(),i())}function b(e){switch(e.currentTarget.id){case"school":s="school";break;case"engineering":s="engineering";break;case"info":s="info";break;case"undefined":s="";break;default:s=""}}v.addEventListener("change",i);function M(e){switch(e){case"all":c.sort((t,n)=>Number(t.completed)-Number(n.completed));break;case"atoz":c.sort((t,n)=>{let r=t.inputContent.toLowerCase(),o=n.inputContent.toLowerCase();return r<o?-1:r>o?1:0}),c.sort((t,n)=>Number(t.completed)-Number(n.completed));break;case"date":c.sort((t,n)=>{let r=new Date(t.createdAt);return new Date(n.createdAt)-r}),c.sort((t,n)=>Number(t.completed)-Number(n.completed));break;case"undone":c.sort((t,n)=>{let r=new Date(t.deadline),o=new Date(n.deadline);return r-o}),c.sort((t,n)=>Number(t.completed)-Number(n.completed));break}}function R(e){const t=e.target,n=c.find(r=>r.id==t.id.replace("task-",""));n.completed=!n.completed,n.completed==!0?t.checked=!0:t.checked=!1,c.sort((r,o)=>Number(r.completed)-Number(o.completed)),t.removeEventListener("click",y),y(),i()}function B(e){let t=e.currentTarget,n=Array.from(document.querySelectorAll(".trash-btn"));const r=n.find(d=>d.id===t?.id),o=n.indexOf(r);r?.id==t?.id&&(c.splice(o,1),y(),i())}i();
