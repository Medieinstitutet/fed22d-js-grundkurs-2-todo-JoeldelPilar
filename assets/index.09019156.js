(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const g of d.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function n(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerpolicy&&(d.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?d.credentials="include":o.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function c(o){if(o.ep)return;o.ep=!0;const d=n(o);fetch(o.href,d)}})();let m;const w=new Uint8Array(16);function S(){if(!m&&(m=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!m))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(w)}const a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));function L(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}const D=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),b={randomUUID:D};function T(e,t,n){if(b.randomUUID&&!t&&!e)return b.randomUUID();e=e||{};const c=e.random||(e.rng||S)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,t){n=n||0;for(let o=0;o<16;++o)t[n+o]=c[o];return t}return L(c)}const h="task.todoDatabase",r=JSON.parse(localStorage.getItem(h))||[],i=new Date;let x=i.getFullYear(),C=i.getMonth()+1,E=i.getDate(),s="";const N=document.getElementById("date-stamp"),I=document.getElementById("current-week"),p=document.querySelector("#all-tasks"),q=document.querySelector("#task-form"),l=document.querySelector("#new-task-input"),k=document.querySelector("#icon"),A=document.querySelector("#date-dropdown"),v=document.querySelector("#category"),$=document.querySelector("#school"),O=document.querySelector("#engineering"),U=document.querySelector("#info");N.innerHTML=x+"-"+C+"-"+String(E).padStart(2,"0");$.addEventListener("click",f);O.addEventListener("click",f);U.addEventListener("click",f);q?.addEventListener("submit",e=>{if(e.preventDefault(),/^\s*$/.test(l.value)){alert("Don't forget to specify your task");return}const n={id:T(),inputContent:l.value,createdAt:i,deadline:A.value,completed:!1,category:s};B(n),l.value="",s=""});function M(){document.querySelectorAll(".trash-btn").forEach(e=>{e.addEventListener("click",R)}),document.querySelectorAll(".hidden-checkbox").forEach(e=>{e.addEventListener("click",H)})}function u(){F(v.value),p&&(p.innerHTML="");for(var e=0;e<r.length;e++){const t=r[e].completed?"checked":"";p&&(p.innerHTML+=`
            <div id="${r[e].id}" class="task p-1 text-slate-800 flex">
              <input type="checkbox" ${t} id="task-${r[e].id}" class="hidden-checkbox absolute opacity-0">
              <label title="Deadline at ${r[e].deadline}" for="task-${r[e].id}" class="gap-2 flex-grow bg-slate-200/20 p-1 flex items-center font-semibold">
                <span><span id="checkbox-${r[e].id}" class="custom-checkbox flex"></span></span>
                <p>${r[e].inputContent}<span class="material-symbols-outlined">${r[e].category}</span><br><span class="opacity-50">Deadline: ${r[e].deadline}</span></p>
              </label>
              <button id="remove-${r[e].id}" class="trash-btn p-1 bg-slate-200/20 z-10">
                <span class="material-symbols-outlined pt-2">
                  delete
                </span>
              </button>
            </div>
        `);let n=new Date(r[e].deadline);const c=new Date(i.getFullYear(),i.getMonth(),i.getDate()+5),o=document.querySelector(`[id="${r[e].id}"]`);n<i?o.classList.add("border-2","border-red-700"):n<=c&&o.classList.add("border-2","border-sky-500"),r[e].completed&&o.classList.remove("border-2")}M()}function y(){localStorage.setItem(h,JSON.stringify(r))}function B(e){r.find(n=>n.inputContent===l.value)?.inputContent===l.value?alert("Task is already on your list, work smarter not harder!"):(r.push(e),r.sort((n,c)=>Number(n.completed)-Number(c.completed)),y(),u())}function f(e){switch(e.currentTarget.id){case"school":s="school";break;case"engineering":s="engineering";break;case"info":s="info";break;case"undefined":s="";break;default:s=""}k.innerText===s&&(s=""),k.innerText=s}v.addEventListener("change",u);function F(e){switch(e){case"all":r.sort((t,n)=>Number(t.completed)-Number(n.completed));break;case"atoz":r.sort((t,n)=>{let c=t.inputContent.toLowerCase(),o=n.inputContent.toLowerCase();return c<o?-1:c>o?1:0}),r.sort((t,n)=>Number(t.completed)-Number(n.completed));break;case"date":r.sort((t,n)=>{let c=new Date(t.createdAt);return new Date(n.createdAt)-c}),r.sort((t,n)=>Number(t.completed)-Number(n.completed));break;case"undone":r.sort((t,n)=>{let c=new Date(t.deadline),o=new Date(n.deadline);return c-o}),r.sort((t,n)=>Number(t.completed)-Number(n.completed));break}}function H(e){const t=e.target,n=r.find(c=>c.id==t.id.replace("task-",""));n.completed=!n.completed,n.completed==!0?t.checked=!0:t.checked=!1,r.sort((c,o)=>Number(c.completed)-Number(o.completed)),t.removeEventListener("click",y),y(),u()}function R(e){let t=e.currentTarget,n=Array.from(document.querySelectorAll(".trash-btn"));const c=n.find(d=>d.id===t?.id),o=n.indexOf(c);c?.id==t?.id&&(r.splice(o,1),y(),u())}async function V(){return fetch("https://worldtimeapi.org/api/ip/").then(e=>e.json()).then(e=>e).catch(e=>(console.error("Error fetching week",e),null))}const _=await V();I.innerHTML="| week: "+_.week_number;u();
